"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[80900],{15680:(e,n,t)=>{t.d(n,{xA:()=>d,yg:()=>h});var a=t(96540);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},g="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),g=c(t),p=l,h=g["".concat(s,".").concat(p)]||g[p]||u[p]||r;return t?a.createElement(h,i(i({ref:n},d),{},{components:t})):a.createElement(h,i({ref:n},d))}));function h(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,i=new Array(r);i[0]=p;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o[g]="string"==typeof e?e:l,i[1]=o;for(var c=2;c<r;c++)i[c]=t[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},40826:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var a=t(58168),l=(t(96540),t(15680));const r={title:"DolphinScheduler Scheduling Engine Example",sidebar_position:2},i=void 0,o={unversionedId:"quick_start/offline_data_sync/dolphinscheduler_example",id:"quick_start/offline_data_sync/dolphinscheduler_example",title:"DolphinScheduler Scheduling Engine Example",description:"In the following sections, we will walk through a complete example to demonstrate how to integrate the third-party scheduling engine DolphinScheduler into Apache InLong to create an offline data synchronization from Pulsar to MySQL.",source:"@site/docs/quick_start/offline_data_sync/dolphinscheduler_example.md",sourceDirName:"quick_start/offline_data_sync",slug:"/quick_start/offline_data_sync/dolphinscheduler_example",permalink:"/docs/next/quick_start/offline_data_sync/dolphinscheduler_example",draft:!1,editUrl:"https://github.com/apache/inlong-website/edit/master/docs/quick_start/offline_data_sync/dolphinscheduler_example.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"DolphinScheduler Scheduling Engine Example",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Quartz Scheduling Engine Example",permalink:"/docs/next/quick_start/offline_data_sync/quartz_example"},next:{title:"Airflow Scheduling Engine Example",permalink:"/docs/next/quick_start/offline_data_sync/airflow_example"}},s={},c=[{value:"Deployment",id:"deployment",level:2},{value:"Install InLong",id:"install-inlong",level:3},{value:"Add Connectors",id:"add-connectors",level:3},{value:"Create Clusters And Data Target",id:"create-clusters-and-data-target",level:2},{value:"Create Cluster Tag",id:"create-cluster-tag",level:3},{value:"Register Pulsar Cluster",id:"register-pulsar-cluster",level:3},{value:"Create Data Target",id:"create-data-target",level:3},{value:"DolphinScheduler Initialize",id:"dolphinscheduler-initialize",level:2},{value:"Deploy DolphinScheduler",id:"deploy-dolphinscheduler",level:3},{value:"Get DolphinScheduler token",id:"get-dolphinscheduler-token",level:3},{value:"Configure InLong Manager",id:"configure-inlong-manager",level:3},{value:"Task Creation",id:"task-creation",level:2},{value:"Create Synchronization Task",id:"create-synchronization-task",level:3},{value:"Create Data Stream Group",id:"create-data-stream-group",level:3},{value:"Create DolphinScheduler Offline Task",id:"create-dolphinscheduler-offline-task",level:3},{value:"Test Data",id:"test-data",level:2},{value:"Sending Data",id:"sending-data",level:3},{value:"Data Validation",id:"data-validation",level:3}],d={toc:c},g="wrapper";function u(e){let{components:n,...r}=e;return(0,l.yg)(g,(0,a.A)({},d,r,{components:n,mdxType:"MDXLayout"}),(0,l.yg)("p",null,"In the following sections, we will walk through a complete example to demonstrate how to integrate the third-party scheduling engine DolphinScheduler into Apache InLong to create an offline data synchronization from Pulsar to MySQL."),(0,l.yg)("h2",{id:"deployment"},"Deployment"),(0,l.yg)("h3",{id:"install-inlong"},"Install InLong"),(0,l.yg)("p",null,"Before we begin, we need to install InLong and a usable DolphinScheduler. Here we provide two ways:"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"/docs/next/deployment/docker"},"Docker Deployment")," (Recommended)"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"/docs/next/deployment/bare_metal"},"Bare Metal Deployment"))),(0,l.yg)("h3",{id:"add-connectors"},"Add Connectors"),(0,l.yg)("p",null,"Download the ",(0,l.yg)("a",{parentName:"p",href:"https://inlong.apache.org/downloads/"},"connectors")," corresponding to Flink version, and after decompression, place ",(0,l.yg)("inlineCode",{parentName:"p"},"sort-connector-jdbc-[version]-SNAPSHOT.jar")," in ",(0,l.yg)("inlineCode",{parentName:"p"},"/inlong-sort/connectors/")," directory."),(0,l.yg)("blockquote",null,(0,l.yg)("p",{parentName:"blockquote"},"Currently, Apache InLong's offline data synchronization capability only supports Flink-1.18, so please download the 1.18 version of connectors.")),(0,l.yg)("h2",{id:"create-clusters-and-data-target"},"Create Clusters And Data Target"),(0,l.yg)("p",null,"When all containers are successfully started, you can access the InLong dashboard address ",(0,l.yg)("inlineCode",{parentName:"p"},"http://localhost"),", and use the following default account to log in."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"User: admin\nPassword: inlong\n")),(0,l.yg)("h3",{id:"create-cluster-tag"},"Create Cluster Tag"),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"DolphinScheduler Create Cluster Tag",src:t(74445).A,width:"1836",height:"699"})),(0,l.yg)("h3",{id:"register-pulsar-cluster"},"Register Pulsar Cluster"),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"DolphinScheduler Create Pulsar Cluster",src:t(89192).A,width:"1900",height:"849"})),(0,l.yg)("h3",{id:"create-data-target"},"Create Data Target"),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"DolphinScheduler Create Data Target",src:t(79410).A,width:"1890",height:"861"})),(0,l.yg)("p",null,"Execute the following SQL statement:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-mysql"},"CREATE TABLE sink_table (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    name VARCHAR(255) NOT NULL,\n    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n")),(0,l.yg)("h2",{id:"dolphinscheduler-initialize"},"DolphinScheduler Initialize"),(0,l.yg)("h3",{id:"deploy-dolphinscheduler"},"Deploy DolphinScheduler"),(0,l.yg)("p",null,"Before using DolphinScheduler as your scheduling engine, please make sure you have a working DolphinScheduler on hand. If you need to deploy a DolphinScheduler for yourself, please refer to the ",(0,l.yg)("a",{parentName:"p",href:"https://dolphinscheduler.apache.org/zh-cn"},"DolphinScheduler Official Document"),"."),(0,l.yg)("h3",{id:"get-dolphinscheduler-token"},"Get DolphinScheduler token"),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"DolphinScheduler Security",src:t(39921).A,width:"3324",height:"1538"})),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"DolphinScheduler Token Manager",src:t(4580).A,width:"3488",height:"1192"})),(0,l.yg)("p",null,"Go into Token Manager page to create a token for InLong to access."),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"DolphinScheduler Token Generate",src:t(42912).A,width:"1538",height:"910"})),(0,l.yg)("p",null,"Set parameters for the token according to the steps in the figure, include ","[Expiration Time]",", ","[User]",", then generate a token."),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"DolphinScheduler Token Copy",src:t(17250).A,width:"2972",height:"702"})),(0,l.yg)("h3",{id:"configure-inlong-manager"},"Configure InLong Manager"),(0,l.yg)("p",null,"For third-party scheduling engine, we need to modify configurations in manager."),(0,l.yg)("p",null,"For DolphinScheduler engine there are following configurations need to be modified:"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"schedule.engine.inlong.manager.url")," : Third-party scheduling engine needs to access the inlong manager through this url."),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"schedule.engine.dolphinscheduler.url")," : DolphinScheduler deployment url, general format is http://{ip}:{port}/dolphinscheduler"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"schedule.engine.dolphinscheduler.token")," : Token you just generated in Token Manager of DolphinScheduler.")),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"InLong Manager Configuration",src:t(69377).A,width:"1426",height:"268"})),(0,l.yg)("p",null,"After doing this, restart the InLong Manager to ensure the configuration is enabled."),(0,l.yg)("h2",{id:"task-creation"},"Task Creation"),(0,l.yg)("h3",{id:"create-synchronization-task"},"Create Synchronization Task"),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"DolphinScheduler Create Synchronization Task",src:t(14788).A,width:"1897",height:"434"})),(0,l.yg)("h3",{id:"create-data-stream-group"},"Create Data Stream Group"),(0,l.yg)("p",null,"During configure the offline synchronization task, choose DolphinScheduler when selecting the scheduling engine, then configure other parameters."),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"DolphinScheduler Task Configuration",src:t(11095).A,width:"1267",height:"874"})),(0,l.yg)("p",null,"For details about how to manage clusters and configure data nodes, see ",(0,l.yg)("a",{parentName:"p",href:"/docs/next/quick_start/offline_data_sync/quartz_example"},"Quartz Scheduling Engine Example"),"."),(0,l.yg)("h3",{id:"create-dolphinscheduler-offline-task"},"Create DolphinScheduler Offline Task"),(0,l.yg)("p",null,"After approval data flow, return to the ","[Synchronization]"," page and wait for the task configuration to succeed. Once configured successfully, the DolphinScheduler will periodically calls back InLong to synchronize offline data and the Manager will periodically submit Flink Batch Jobs to the Flink cluster."),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"DolphinScheduler Schedule Process",src:t(10426).A,width:"3676",height:"1090"})),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"DolphinScheduler Process Success",src:t(72280).A,width:"3570",height:"1386"})),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"DolphinScheduler Process Instance",src:t(21216).A,width:"3614",height:"1370"})),(0,l.yg)("p",null,"View the DolphinScheduler task instance logs. The following logs indicate that the configuration is successful."),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"DolphinScheduler Schedule Success",src:t(81819).A,width:"2362",height:"1170"})),(0,l.yg)("h2",{id:"test-data"},"Test Data"),(0,l.yg)("h3",{id:"sending-data"},"Sending Data"),(0,l.yg)("p",null,"Use the Pulsar SDK to produce data into the Pulsar topic. An example is as follows:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-java"},'        // Create Pulsar client and producer\n        PulsarClient pulsarClient = PulsarClient.builder().serviceUrl("pulsar://localhost:6650").build();\n        Producer<byte[]> producer = pulsarClient.newProducer().topic("public/default/test").create();\n\n        // Send messages\n        for (int i = 0; i < 10000; i++) {\n            // Field separator is |\n            String msgStr = i + "|msg-" + i;\n            MessageId msgId = producer.send(msgStr.getBytes(StandardCharsets.UTF_8));\n            System.out.println("Send msg : " + msgStr + " with msgId: " + msgId);\n        }\n')),(0,l.yg)("h3",{id:"data-validation"},"Data Validation"),(0,l.yg)("p",null,"Then enter MySQL to check the data in the table:"),(0,l.yg)("p",null,(0,l.yg)("img",{alt:"MySQL Result",src:t(18747).A,width:"307",height:"441"})))}u.isMDXComponent=!0},74445:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_create_cluster_tag-b129d586751d94a519eaf6ca1bf742f1.png"},79410:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_create_data_target-c88271bf62b207dc2180eb279b33ee3a.png"},89192:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_create_pulsar_cluster-964f0bbe98fff8cd844505c327f89422.png"},14788:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_create_synchronization_task-9efa5cb26be456ac3c47e2a052a12f65.png"},21216:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_process_instance-13d2312aaf3a5d724957ca92a7a10e63.png"},72280:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_process_success-2d9bce0ac8fcd9e5f9443ae9510ac3b2.png"},10426:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_schedule_process-daabe1713e91621a1f1ed9faa562985c.png"},81819:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_schedule_success-28c0ed6cfb28fdba02f90ae4133b7675.png"},39921:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_security-6242a4af69d39014a90edd3be2a2e6be.png"},11095:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_task_conf-46191374c152931c57283fb78b18e119.png"},17250:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_token_copy-5c3eb16643925e642c1ff01cfcd56d62.png"},42912:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_token_generate-92a4fe012b0c783bc1682f949c25abf5.png"},4580:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_token_manager-9ee76465b9f93c4e73c076848cb27689.png"},69377:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/inlong_manager_conf-e9400d609bc738d6d08089785a6ea935.png"},18747:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/mysql_result-2ae22dcfef35ab70a315b8ac6658c2a4.png"}}]);