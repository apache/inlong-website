<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.0.0 plugin-docs plugin-id-default docs-doc-id-development/binary_protocol/inlong_msg">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">InLongMsg format definition and usage | Apache InLong</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://inlong.apache.org/docs/2.0.0/development/binary_protocol/inlong_msg"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.0.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.0.0"><meta data-rh="true" name="docsearch:version" content="2.0.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.0.0"><meta data-rh="true" property="og:title" content="InLongMsg format definition and usage | Apache InLong"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/img/logo.svg"><link data-rh="true" rel="canonical" href="https://inlong.apache.org/docs/2.0.0/development/binary_protocol/inlong_msg"><link data-rh="true" rel="alternate" href="https://inlong.apache.org/docs/2.0.0/development/binary_protocol/inlong_msg" hreflang="en"><link data-rh="true" rel="alternate" href="https://inlong.apache.org/zh-CN/docs/2.0.0/development/binary_protocol/inlong_msg" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://inlong.apache.org/docs/2.0.0/development/binary_protocol/inlong_msg" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://YUW9QEL53E-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache InLong RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache InLong Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Apache InLong" href="/opensearch.xml">



<script src="https://www.apachecon.com/event-images/snippet.js" async></script><link rel="stylesheet" href="/assets/css/styles.7d3d0a53.css">
<link rel="preload" href="/assets/js/runtime~main.1307b338.js" as="script">
<link rel="preload" href="/assets/js/main.919e10fa.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Apache" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Apache" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Apache InLong</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/introduction">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/introduction">Next</a></li><li><a class="dropdown__link" href="/docs/introduction">2.1.0</a></li><li><a class="dropdown__link" href="/docs/2.0.0/introduction">2.0.0</a></li><li><a class="dropdown__link" href="/versions/">All versions</a></li></ul></div><a class="navbar__item navbar__link" href="/downloads">Download</a><a class="navbar__item navbar__link" href="/community/how-to-contribute">Community</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/team">Team</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Apache Software Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/policies/privacy.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/2.0.0/development/binary_protocol/inlong_msg" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh-CN/docs/2.0.0/development/binary_protocol/inlong_msg" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">简体中文</a></li></ul></div><a href="https://github.com/apache/inlong" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/2.0.0/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.0.0/design_and_concept/basic_concept">Design and Concept</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.0.0/quick_start/data_ingestion/file_pulsar_clickhouse_example">Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.0.0/deployment/standalone">Deployment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.0.0/modules/agent/overview">Components</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.0.0/data_node/extract_node/overview">Data Nodes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.0.0/sdk/dataproxy-sdk/cpp">SDK</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.0.0/user_guide/dashboard_usage">User Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/2.0.0/development/how_to_build">Development</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.0.0/development/how_to_build">How to Build</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/2.0.0/development/binary_protocol/inlong_msg">Binary Protocol</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/2.0.0/development/binary_protocol/inlong_msg">InLongMsg format definition and usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.0.0/development/binary_protocol/agent">Agent binary protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.0.0/development/binary_protocol/dataproxy_binary">DataProxy binary protocol and usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.0.0/development/binary_protocol/tubemq_binary">TubeMQ binary protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.0.0/development/binary_protocol/audit_msg">Audit data format definition and usage</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/2.0.0/development/extension_agent/agent">Agent Plugins Extension</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/2.0.0/development/extension_dataproxy/how_to_write_plugin_dataproxy">DataProxy Plugins Extension</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/2.0.0/development/extension_manager/inlong_manager_shiro_plugin">Manager Plugins Extension</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/2.0.0/development/extension_sort/extension_connector">Sort Plugins Extension</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/2.0.0/development/extension_transform/transform_udf">Transform Plugins Extension</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/2.0.0/development/extension_dashboard/how_to_write_plugin_dashboard">Dashboard Plugins Extension</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.0.0/development/api">REST API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/2.0.0/administration/user_management">Administration</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/2.0.0/contact">Contact Us</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Apache InLong<!-- --> <b>2.0.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/development/binary_protocol/inlong_msg">latest version</a></b> (<!-- -->2.1.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Development</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Binary Protocol</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">InLongMsg format definition and usage</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.0.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>InLongMsg format definition and usage</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2><p>Users report data to the InLong system through SDK, HTTP, Agent and other data reporting methods. InLong&#x27;s DataProxy component packages the received data into the <code>InLongMsg</code> format and stores it in the message body of the MQ message. After consuming data from MQ, users need to decode it according to the <code>InLongMsg</code> format to obtain the original reported data. This article mainly introduces the data structure of the <code>InLongMsg</code> format and how users parse this type of data after receiving it.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="inlongmsg-data-format">InLongMsg data format<a href="#inlongmsg-data-format" class="hash-link" aria-label="Direct link to InLongMsg data format" title="Direct link to InLongMsg data format">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="format-framework">Format framework<a href="#format-framework" class="hash-link" aria-label="Direct link to Format framework" title="Direct link to Format framework">​</a></h3><p>InLongMsg is a binary data packet in a custom format, which consists of a formatted payload information encapsulated by the same magic number (Magic) of 2 bytes at the front and back, as shown in the following figure:</p><p><img loading="lazy" alt="InLongMsg frame" src="/assets/images/inlongmsg_frame-760dbc653756379d83917e3680ced411.png" width="737" height="493" class="img_ev3q"></p><p>The Magic field has 4 valid values in the current implementation of InLongMsg, which respectively identify 4 different data versions that can be carried in the Payload part (MAGIC0 is an invalid value):</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private static final byte[] MAGIC0 = {(byte) 0xf, (byte) 0x0};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private static final byte[] MAGIC1 = {(byte) 0xf, (byte) 0x1};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private static final byte[] MAGIC2 = {(byte) 0xf, (byte) 0x2};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private static final byte[] MAGIC3 = {(byte) 0xf, (byte) 0x3};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private static final byte[] MAGIC4 = {(byte) 0xf, (byte) 0x4};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The Payload part carries data content in the corresponding format according to the definition of the above Magic field. Regardless of the format used, these contents are ultimately mapped to the original data information reported by the user according to {attribute set, single data} or {attribute set, multiple data}.
Next, we begin to introduce the corresponding Payload definitions according to different Magic version values.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inlongmsg-v1">InLongMsg V1<a href="#inlongmsg-v1" class="hash-link" aria-label="Direct link to InLongMsg V1" title="Direct link to InLongMsg V1">​</a></h3><p>For the InLongMsg V1 format, the Magic field value is 0x0f01. In this value, the Payload format is as shown below:</p><p><img loading="lazy" alt="InLongMsg V1" src="/assets/images/inlongmsg_v1-3dab90fa6121bae1ad009a224adcb8e4.png" width="1691" height="249" class="img_ev3q"></p><p>Among them:</p><ul><li><p>CreatTime: field identifies the construction time of the InLogMsg message;</p></li><li><p>AttrDataCnt: field identifies how many {attribute, data} pairs are carried in the message;</p></li></ul><p>AttrDataCnt The following information is stored in pairs of {attribute, data}</p><ul><li><p>AttrLen, AttrData: The fields define the length and value of the attribute information;</p></li><li><p>ItemsLen: The field identifies the entire data length information contained in the attribute, and this field contains the length information of the following Compress field;</p></li><li><p>Compress: The field identifies whether the following data part is compressed. If it is compressed, it is organized in the following format after decompression. InLongMsg currently only supports Snappy data compression;</p></li></ul><p>Since the attribute may carry multiple data, the data part needs to support multiple data:</p><ul><li><p>ItemLen: field identifies the length of the data item;</p></li><li><p>ItemData: field identifies the data value.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inlongmsg-v2">InLongMsg V2<a href="#inlongmsg-v2" class="hash-link" aria-label="Direct link to InLongMsg V2" title="Direct link to InLongMsg V2">​</a></h3><p>For the InLongMsg V2 format, the Magic field value is 0x0f02. When this value is used, the Payload format is as shown in the following figure:</p><p><img loading="lazy" alt="InLongMsg V2" src="/assets/images/inlongmsg_v2-325419a884ef19665f823e03fb96d3e1.png" width="1856" height="247" class="img_ev3q"></p><p>Compared with the InLongMsg V1 format, the meanings of the other fields of the InLongMsg V2 format are the same as those of the V1 format except for the newly added MsgCnt and ItemCnt fields:</p><ul><li><p>MsgCnt: used to identify the total number of data items carried by the message;</p></li><li><p>ItemCnt: used to identify the total number of data items in the {attribute, data} pair information.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inlongmsg-v3">InLongMsg V3<a href="#inlongmsg-v3" class="hash-link" aria-label="Direct link to InLongMsg V3" title="Direct link to InLongMsg V3">​</a></h3><p>For the InLongMsg V3 format, the Magic field value is 0x0f03. When this value is used, the Payload format is as shown in the following figure:</p><p><img loading="lazy" alt="InLongMsg V3" src="/assets/images/inlongmsg_v3-15280569a0abbb2882ad6aea293620b2.png" width="1918" height="228" class="img_ev3q"></p><p>Compared with InLongMsg V1 and V2 formats, InLongMsg V3 format mainly solves the data reporting situation of {attribute set, multiple data} in the information, and each data carries private attributes. In the V3 format definition, it is completed by adding data private attribute fields to each data part, as follows:</p><ul><li><p>RecordLen: used to identify the total length of a single data record;</p></li><li><p>IAttrLen: used to identify the length of the private attribute carried by a single data;</p></li><li><p>IitemAttr: used to identify the private attribute data value carried by a single data.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inlongmsg-v4">InLongMsg V4<a href="#inlongmsg-v4" class="hash-link" aria-label="Direct link to InLongMsg V4" title="Direct link to InLongMsg V4">​</a></h3><p>For the InLongMsg V4 format, the Magic field value is 0x0f04. When this value is used, the Payload format is as shown in the following figure:</p><p><img loading="lazy" alt="InLongMsg V4" src="/assets/images/inlongmsg_v4-5bdba40b8b80f5e5aa35678d7343f448.png" width="1918" height="172" class="img_ev3q"></p><p>Compared with the previous InLongMsg V1, V2, and V3 format definitions, InLongMsg V4 has two improvements:</p><ol><li><p>The fixed fields in the common attributes are extracted from the attribute key-value pairs and saved as fixed fields, thereby reducing the total message length;</p></li><li><p>Different bits of some fixed fields carry different values to indicate different function activations or type definitions.</p></li></ol><p>The relevant fields are defined as follows:</p><ul><li><p>TotalLen: identifies the total length of the entire message;</p></li><li><p>MsgType: This field is a composite field that indicates the type and compression type of the message. The lower 5 bits indicate the message type, and the upper 3 bits indicate the compression method. Different bits indicate different meanings;</p></li><li><p>GroupId: identifies the ID value corresponding to the group, used when transmitting digital group information;</p></li><li><p>StreamId: identifies the ID value corresponding to the stream, used when transmitting digital stream information;</p></li><li><p>ExtField: identifies the extended function enabling field, used to transmit the extended function enabled by the message, and different bits indicate different meanings. For details, see the ExtField bit definition table;</p></li><li><p>DataTime: identifies the data time, with precision in seconds;</p></li><li><p>MsgCnt: identifies the total number of messages carried;</p></li><li><p>UniqueId: identifies the unique tag of the 8-byte long type of the message;</p></li><li><p>BodyLen: identifies the total length of the message body, and identifies the length of the following binary message body data;</p></li><li><p>BodyData: identifies the binary message content carried by the message;</p></li><li><p>AttrLen: identifies the attribute length;</p></li><li><p>AttrData: identifies the attribute value content.</p></li></ul><p>For ExtField field, each bit is defined as follows:</p><table><thead><tr><th>Bit</th><th>Meaning</th><th>Remark</th></tr></thead><tbody><tr><td>0</td><td>reserved</td><td></td></tr><tr><td>1</td><td>Whether each data contains private attributes</td><td>1 indicates inclusion, 0 indicates exclusion</td></tr><tr><td>2</td><td>Whether to enable digital group, stream</td><td>0 indicates enabled, 1 indicates not enabled</td></tr><tr><td>3</td><td>reserved</td><td></td></tr><tr><td>4</td><td>reserved</td><td></td></tr><tr><td>5</td><td>Whether multiple data are separated by newline characters</td><td>1 indicates enabled, 0 indicates not enabled</td></tr><tr><td>6</td><td>reserved</td><td></td></tr><tr><td>7</td><td>reserved</td><td></td></tr></tbody></table><p>For BodyData field value, the format is as follows:</p><p><img loading="lazy" alt="InLongMsg V4 BodyData" src="data:image/png;base64,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" width="489" height="112" class="img_ev3q"></p><ul><li><p>ItemLen: identifies the data length;</p></li><li><p>ItemData: identifies the data value;</p></li><li><p>IAttrLen: identifies the private attribute length;</p></li><li><p>IitemAttr: identifies the private attribute value.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="parsing-messages-of-type-inlongmsg">Parsing messages of type InLongMsg<a href="#parsing-messages-of-type-inlongmsg" class="hash-link" aria-label="Direct link to Parsing messages of type InLongMsg" title="Direct link to Parsing messages of type InLongMsg">​</a></h2><p>The data consumed directly from InLong&#x27;s message queue (InLong TubeMQ or Pulsar), you need to parse InLongMsg first. You can parse the source data in the following ways.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-maven-dependency">Add Maven dependency<a href="#add-maven-dependency" class="hash-link" aria-label="Direct link to Add Maven dependency" title="Direct link to Add Maven dependency">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;groupId&gt;org.apache.inlong&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;artifactId&gt;inlong-common&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;version&gt;2.1.0-SNAPSHOT&lt;/version&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-parse-method">Add Parse Method<a href="#add-parse-method" class="hash-link" aria-label="Direct link to Add Parse Method" title="Direct link to Add Parse Method">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public static List&lt;byte[]&gt; parserInLongMsg(byte[] bytes) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    List&lt;byte[]&gt; originalContentByteList = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    InLongMsg inLongMsg = InLongMsg.parseFrom(bytes);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Set&lt;String&gt; attrs = inLongMsg.getAttrs();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (CollectionUtils.isEmpty(attrs)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return originalContentByteList;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    for (String attr : attrs) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (attr == null) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            continue;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Iterator&lt;byte[]&gt; iterator = inLongMsg.getIterator(attr);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (iterator == null) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            continue;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        while (iterator.hasNext()) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            byte[] bodyBytes = iterator.next();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (bodyBytes == null || bodyBytes.length == 0) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                continue;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // Origin data sent by InLong reporter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            originalContentByteList.add(bodyBytes);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return originalContentByteList;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/inlong-website/edit/master/versioned_docs/version-2.0.0/development/binary_protocol/inlong_msg.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/2.0.0/development/how_to_build"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">How to Build</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/2.0.0/development/binary_protocol/agent"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Agent binary protocol</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#inlongmsg-data-format" class="table-of-contents__link toc-highlight">InLongMsg data format</a><ul><li><a href="#format-framework" class="table-of-contents__link toc-highlight">Format framework</a></li><li><a href="#inlongmsg-v1" class="table-of-contents__link toc-highlight">InLongMsg V1</a></li><li><a href="#inlongmsg-v2" class="table-of-contents__link toc-highlight">InLongMsg V2</a></li><li><a href="#inlongmsg-v3" class="table-of-contents__link toc-highlight">InLongMsg V3</a></li><li><a href="#inlongmsg-v4" class="table-of-contents__link toc-highlight">InLongMsg V4</a></li></ul></li><li><a href="#parsing-messages-of-type-inlongmsg" class="table-of-contents__link toc-highlight">Parsing messages of type InLongMsg</a><ul><li><a href="#add-maven-dependency" class="table-of-contents__link toc-highlight">Add Maven dependency</a></li><li><a href="#add-parse-method" class="table-of-contents__link toc-highlight">Add Parse Method</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Events</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apachecon.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ApacheCon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="acevent" data-format="square" data-mode="dark" data-event="random"></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/ApacheInlong" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://inlong.apache.org/img/apache-inlong-wechat.jpg" target="_blank" rel="noopener noreferrer" class="footer__link-item">WeChat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:dev@inlong.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/apache/inlong" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/asf_logo.svg" alt="Apache InLong" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/img/asf_logo.svg" alt="Apache InLong" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright"><div style="font-family: Avenir-Medium;font-size: 14px;color: #999;">
          <div>Copyright © 2020-2024 The Apache Software Foundation. Licensed under the Apache License, Version 2.0.</div>
          <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #666;line-height: 20px;">The Apache Software Foundation Apache InLong, InLong, Apache, the Apache feather, and the Apache InLong project logo are either registered trademarks or trademarks of the Apache Software Foundation.</div>
        </div></div></div></div></footer></div>
<script src="/assets/js/runtime~main.1307b338.js"></script>
<script src="/assets/js/main.919e10fa.js"></script>
</body>
</html>