<!doctype html>
<html class="docs-version-0.11.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Inlong Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Inlong Blog Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="Apache Inlong RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="Apache Inlong Atom Feed"><title data-react-helmet="true">Deployment | Apache Inlong</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://inlong.apache.org/docs/0.11.0/modules/tubemq/deployment"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="0.11.0"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-0.11.0"><meta data-react-helmet="true" property="og:title" content="Deployment | Apache Inlong"><meta data-react-helmet="true" name="description" content="1 Compile and Package ProjectÔºö"><meta data-react-helmet="true" property="og:description" content="1 Compile and Package ProjectÔºö"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo.svg"><link data-react-helmet="true" rel="canonical" href="https://inlong.apache.org/docs/0.11.0/modules/tubemq/deployment"><link data-react-helmet="true" rel="alternate" href="https://inlong.apache.org/docs/0.11.0/modules/tubemq/deployment" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://inlong.apache.org/zh-CN/docs/0.11.0/modules/tubemq/deployment" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://inlong.apache.org/docs/0.11.0/modules/tubemq/deployment" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.235f9eab.css">
<link rel="preload" href="/assets/js/runtime~main.3640fdfa.js" as="script">
<link rel="preload" href="/assets/js/main.fd9177da.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" style="background-color:#BBDFFF" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">‚≠êÔ∏è &nbsp; If you like Apache InLong , give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/apache/incubator-inlong">GitHub</a></div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Apache" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.svg" alt="Apache" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Apache InLong</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/">HOME</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/introduction">DOC</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/introduction">Next</a></li><li><a class="dropdown__link" href="/docs/introduction">0.12.0</a></li><li><a class="dropdown__link" href="/docs/0.11.0/user_guide/quick_start">0.11.0</a></li><li><a class="dropdown__link" href="/versions/">All versions</a></li></ul></div><a class="navbar__item navbar__link" href="/download/main">DOWNLOAD</a><a class="navbar__item navbar__link" href="/development/how-to-contribute">DEVELOPMENT</a><a class="navbar__item navbar__link" href="/blog">BLOG</a><a class="navbar__item navbar__link" href="/news">NEWS</a><a class="navbar__item navbar__link" href="/users">USERS</a><a class="navbar__item navbar__link" href="/team">TEAM</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Apache Software Foundation</a></li><li><a href="https://incubator.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Apache Incubator</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg t="1631348384596" class="iconLanguage_EbrZ" viewBox="0 0 1024 1024" version="1.1" p-id="557" width="20" height="20"><path d="M547.797333 638.208l-104.405333-103.168 1.237333-1.28a720.170667 720.170667 0 0 0 152.490667-268.373333h120.448V183.082667h-287.744V100.906667H347.605333v82.218666H59.818667V265.386667h459.178666a648.234667 648.234667 0 0 1-130.304 219.946666 643.242667 643.242667 0 0 1-94.976-137.728H211.541333a722.048 722.048 0 0 0 122.453334 187.434667l-209.194667 206.378667 58.368 58.368 205.525333-205.525334 127.872 127.829334 31.232-83.84m231.424-208.426667h-82.218666l-184.96 493.312h82.218666l46.037334-123.306667h195.242666l46.464 123.306667h82.218667l-185.002667-493.312m-107.690666 287.744l66.56-178.005333 66.602666 178.005333z" fill="currentColor" p-id="558"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/0.11.0/modules/tubemq/deployment" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/zh-CN/docs/0.11.0/modules/tubemq/deployment" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">ÁÆÄ‰Ωì‰∏≠Êñá</a></li></ul></div><a href="https://github.com/apache/incubator-inlong" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Components</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Manager</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Website</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Agent</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">DataProxy</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">DataProxy-SDK</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">TubeMQ</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.11.0/modules/tubemq/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.11.0/modules/tubemq/client_rpc">Client RPC</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.11.0/modules/tubemq/clients_java">TubeMQ JAVA SDK API</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.11.0/modules/tubemq/configure_introduction">Configure Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.11.0/modules/tubemq/console_introduction">Console Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.11.0/modules/tubemq/consumer_example">Consumer Example</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/0.11.0/modules/tubemq/deployment">Deployment</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.11.0/modules/tubemq/error_code">Error Code</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.11.0/modules/tubemq/http_access_api">HTTP API</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.11.0/modules/tubemq/producer_example">Producer Example</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.11.0/modules/tubemq/quick_start">Quick Start</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">tubemq-manager</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.11.0/modules/tubemq/tubemq_perf_test_vs_Kafka_cn">Performance testing of TubeMQ vs Kafka</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Sort</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/0.11.0/contact">Contact Us</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Apache Inlong<!-- --> <b>0.11.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/introduction">latest version</a></b> (<!-- -->0.12.0<!-- -->).</div></div><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->0.11.0</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Deployment</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="1-compile-and-package-project"></a>1 Compile and Package ProjectÔºö<a class="hash-link" href="#1-compile-and-package-project" title="Direct link to heading">#</a></h2><p>Enter the root directory of project and run:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mvn clean package -Dmaven.test.skip</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>e.g. We put the TubeMQ project package at <code>E:/</code>, then run the above command. Compilation is complete when all subdirectories are compiled successfully.</p><p><img src="/assets/images/sys_compile-afba3f1e66e6fa5e81c08fd43f68b969.png"></p><p>We can also run individual compilation in each subdirectory. Steps are the same as the whole project&#x27;s compilation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="2-server-deployment"></a>2 Server Deployment<a class="hash-link" href="#2-server-deployment" title="Direct link to heading">#</a></h2><p>As example above, entry directory <code>..\InLong\inlong-tubemq\tubemq-server\target</code>, we can see several JARs. <code>apache-inlong-tubemq-server-0.9.0-incubating-SNAPSHOT-bin.tar.gz</code> is the complete server-side installation packageÔºå including execution scripts, configuration files, dependencies, and frontend source code. <code>apache-inlong-tubemq-server-0.9.0-incubating-SNAPSHOT.jar</code> is a server-side processing package included in <code>lib</code> of the complete project installer. Consider to daily changes and upgrades are most made to server side, we place this jar separately so that we just need to replace this jar during upgrade.</p><p><img src="/assets/images/sys_package-f2fd18c8fe2cce7e853b89707ef246de.png"></p><p>Here we have a complete package deployed onto server and we place it in <code>/data/inlong</code></p><p><img src="/assets/images/sys_package_list-3d28301118d002b3d22b2ae39c42ca50.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="3-configuration-system"></a>3 Configuration System<a class="hash-link" href="#3-configuration-system" title="Direct link to heading">#</a></h2><p>There are 3 roles in server package: Master, Broker and Tools. Master and Broker can be deployed on the same or different machine. It depends on the bussiness layouts. As example below, we have 3 machine to startup a complete production and consumption cluster with 2 Masters.</p><table><thead><tr><th>Machine</th><th>Role</th><th>TCP Port</th><th>TLS Port</th><th>WEB Port</th><th>Note</th></tr></thead><tbody><tr><td>9.23.27.24</td><td><strong>Master</strong></td><td>8099</td><td>8199</td><td>8080</td><td>Metadata stored at <code>/stage/meta_data</code></td></tr><tr><td></td><td>Broker</td><td>8123</td><td>8124</td><td>8081</td><td>Message stored at<code>/stage/msg_data</code></td></tr><tr><td></td><td>ZooKeeper</td><td>2181</td><td></td><td></td><td>Offset stored at root directory<code>/tubemq</code></td></tr><tr><td>9.23.28.24</td><td><strong>Master</strong></td><td>8099</td><td>8199</td><td>8080</td><td>Metadata stored at <code>/stage/meta_data</code></td></tr><tr><td></td><td>Broker</td><td>8123</td><td>8124</td><td>8081</td><td>Message stored at<code>/stage/msg_data</code></td></tr><tr><td>9.23.27.160</td><td>Producer</td><td></td><td></td><td></td><td></td></tr><tr><td></td><td>Consumer</td><td></td><td></td><td></td><td></td></tr></tbody></table><p>|</p><p>Something should be noticed during deploying Master:</p><ol><li>Master cluster can be deployed in 1, 2 or 3 machines. 3 machines is suggested if HA is necessary so that reading/writing configuration and access to new production/consumption is still available when one of them is shutdown. In common situation, 2 machines provide readable configuration and proper state of production/consumption already registered when one is shutdown. The minimum is 1 and it provides proper state of production/consumption already registered when is shutdown.</li><li>For machines with Master Role, we should promise clock synchronization. At the same time, IP address of each Master machine should be set in <code>/etc/hosts</code> on each Master machine.</li></ol><p><img src="data:image/png;base64,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"></p><p>Take <code>9.23.27.24</code> and <code>9.23.28.24</code> as examples, if we want to deploy both Master and Broker role on them, we need to configure in <code>/conf/master.ini</code>, <code>/resources/velocity.properties</code> and <code>/conf/broker.ini</code>. First set up the configuration of <code>9.23.27.24</code>,</p><p><img src="/assets/images/sys_configure_1-65cb9392e6e3fa695ff13c6a68deea0d.png"></p><p>then it is <code>9.23.28.24</code>.</p><p><img src="/assets/images/sys_configure_2-b56851b99b004de0c52bf1d0024ef9e1.png"></p><p>Note that the upper right corner is configured with Master&#x27;s web frontend configuration and configuration <code>file.resource.loader.path</code> in <code>/resources/velocity.properties</code> need to be modified according to the Master&#x27;s installation path.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="4-start-up-master"></a>4 Start up MasterÔºö<a class="hash-link" href="#4-start-up-master" title="Direct link to heading">#</a></h2><p>After configuration, entry directory <code>bin</code> of Master environment and start up master.</p><p><img src="/assets/images/sys_master_start-e7bf249361e4767f3f467e8a4a2462dc.png"></p><p>We First start up <code>9.23.27.24</code>, and then start up Master on <code>9.23.28.24</code>. The following messages indicate that the master and backup master have been successfully started up and the external service ports are reachable.</p><p><img src="/assets/images/sys_master_startted-b64dba208789754a593b936333ee8d71.png"></p><p>Visiting Master&#x27;s Administrator panel(<a href="http://9.23.27.24:8080" target="_blank" rel="noopener noreferrer">http://9.23.27.24:8080</a>), search operation working well indicates that master has been successfully started up.</p><p><img src="/assets/images/sys_master_console-212b1466ca4c17167f7a827d09284aad.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="5-start-up-broker"></a>5 Start up BrokerÔºö<a class="hash-link" href="#5-start-up-broker" title="Direct link to heading">#</a></h2><p>Starting up Broker is a little bit different to starting Master: Master is responsible for managing the entire TubeMQ cluster, including Broker node with Topic configuration on them, production and consumption managament. So we need to add metadata on Master before starting up Broker.</p><p><img src="/assets/images/sys_broker_configure-f62da13b910e11d5328022df4ac8fb6e.png"></p><p>Confirm and create a draft record of Broker.</p><p><img src="/assets/images/sys_broker_online-9be62d1c8e9f7a8a61524d769b519347.png"></p><p>We try to start up the Broker.</p><p><img src="/assets/images/sys_broker_start-74cd9a7c21b8c8657ce1c1e919e07f34.png"></p><p>But we got an error message.</p><p><img src="/assets/images/sys_broker_start_error-f695b99ce0e63cc2b085904dbf131bcf.png"></p><p>Because the broker record is currently in draft status and it is not available now. Let&#x27;s go back to Master Administrator panel and publish.</p><p><img src="/assets/images/sys_broker_online_2-3d2c5998549dc0784fa8a07aa99c7cac.png"></p><p>Every changing operation need to text in an Authorization Code when submited to Master. Authorization Code is defined by <code>confModAuthToken</code> in <code>master.ini</code>. If you have the Code of this cluster, we consider you as administrator and you have permission to operate the modification.</p><p><img src="/assets/images/sys_broker_deploy-960e5250a271407d6a3349d22d115af8.png"></p><p>Then we restart the Broker.</p><p><img src="/assets/images/sys_broker_restart_1-7b3c7b14b5b18aad16fa56c4b7da6c02.png"></p><p><img src="/assets/images/sys_broker_restart_2-ad631cc9ef637ac91414ba85da1fea93.png"></p><p>Check the Master Control Panel, broker has successfully registered.</p><p><img src="/assets/images/sys_broker_finished-3de5f5aad97de3ab60f1611bb20d1f2e.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="6-topic-configuration-and-activation"></a>6 Topic Configuration and ActivationÔºö<a class="hash-link" href="#6-topic-configuration-and-activation" title="Direct link to heading">#</a></h2><p>Configuration of Topic is similar with Broker&#x27;s, we should add metadata on Master before using them, otherwise it will report an Not Found Error during production/consumption. For example, if we try to consum a non-existent topic <code>test</code>,
<img src="/assets/images/test_sendmessage-2c9547aa3b283f8f96fe3f7f77a84c2d.png"></p><p>Demo returns error message.
<img src="/assets/images/sys_topic_error-e7a5c0a4c7ac34391b11b5dc373c7a3e.png"></p><p>First we add a topic in topic list page in Master Control Panel.</p><p><img src="/assets/images/sys_topic_create-c26d3b45de85af6958d80b7fc24cd9c2.png"></p><p><img src="/assets/images/sys_topic_select-eb84fec5a5d04b9266d3e6857843f858.png"></p><p>Choose publish scope and confirm after submit topic detail. After adding a new topic, we need to overload the topic.</p><p><img src="/assets/images/sys_topic_deploy-ddee2f69406173a224014533966c552a.png"></p><p>Topic is available after overload. We can see some status of topic has changed after overload.</p><p><img src="/assets/images/sys_topic_finished-d6523140132196743830d225307d4577.png"></p><p><strong>Note</strong> When we are executing overload opertaion, we should make it in batches. Overload operations are controlled by state machines. It would become unwritable and un readale, read-only, readable and writable in order before published. Waiting for overloads on all brokers make topic temporary unreadable and unwritable, which result in production and consumption failure, especially production failure.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="7-message-production-and-consumption"></a>7 Message Production and ConsumptionÔºö<a class="hash-link" href="#7-message-production-and-consumption" title="Direct link to heading">#</a></h2><p>We pack Demo for test in package or <code>tubemq-client-0.9.0-incubating-SNAPSHOT.jar</code> can be used for implementing your own production and consumption.
We run Producer Demo in below script and we can see data accepted on Broker.
<img src="/assets/images/test_sendmessage_2-aca82f8640f949e0e144b6501995de43.png"></p><p><img src="/assets/images/sys_node_status-54e011781d6923d34c617772f48971ca.png"></p><p>Then we run the Consumption Demo and we can see that consumption is also working properly.
<img src="/assets/images/sys_node_status_2-054bb83ab9ddc187c604df5a02d98895.png"></p><p>As we can see, files relative to broker&#x27;s production and consumption already exist.</p><p><img src="/assets/images/sys_node_log-6ef2d911b495fcb6b0914dd5da97a5cc.png"></p><p>Here, the compilation, deployment, system configuration, startup, production and consumption of TubeMQ has been completed!
If you need to get further, please refer to &quot;TubeMQ HTTP API&quot; and make your appropriate configuration settings.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/incubator-inlong-website/edit/master/versioned_docs/version-0.11.0/modules/tubemq/deployment.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/0.11.0/modules/tubemq/consumer_example"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ <!-- -->Consumer Example</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/0.11.0/modules/tubemq/error_code"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Error Code<!-- --> ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-compile-and-package-project" class="table-of-contents__link">1 Compile and Package ProjectÔºö</a></li><li><a href="#2-server-deployment" class="table-of-contents__link">2 Server Deployment</a></li><li><a href="#3-configuration-system" class="table-of-contents__link">3 Configuration System</a></li><li><a href="#4-start-up-master" class="table-of-contents__link">4 Start up MasterÔºö</a></li><li><a href="#5-start-up-broker" class="table-of-contents__link">5 Start up BrokerÔºö</a></li><li><a href="#6-topic-configuration-and-activation" class="table-of-contents__link">6 Topic Configuration and ActivationÔºö</a></li><li><a href="#7-message-production-and-consumption" class="table-of-contents__link">7 Message Production and ConsumptionÔºö</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://inlong.apache.org" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="/img/incubator-logo.svg" alt="Apache Inlong" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/img/incubator-logo.svg" alt="Apache Inlong" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></a></div><div class="footer__copyright"><div style="text-align: left;">
          <div>
            <p style="font-family: Avenir-Medium;font-size: 14px;color: #999;line-height: 20px;"> Apache InLong is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the name of Apache TLP sponsor. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF. </p>
          </div>
          <div style="border-top: 1px solid #ccc;min-height: 60px;line-height: 20px;text-align: center;font-family: Avenir-Medium;font-size: 14px;color: #999;display: flex;align-items: center;"><span>Copyright ¬© 2019-2022 The Apache Software Foundation. Apache InLong, InLong, and its feather logo are trademarks of The Apache Software Foundation.</span></div>
        </div></div></div></div></footer></div>
<script src="/assets/js/runtime~main.3640fdfa.js"></script>
<script src="/assets/js/main.fd9177da.js"></script>
</body>
</html>